<Page x:Class="WpfApp_DataBinding_EF.Pages.UserProfilePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Профиль пользователя" Height="544" Width="654">

    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Верхняя панель -->
        <Grid Grid.Row="0" Margin="0,0,0,10">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <!-- Кнопка назад слева -->
            <Button Content="Назад"
            Margin="0,0,10,0"
            Click="Back_Click"
            Grid.Column="0" />

            <!-- Заголовок строго по центру -->
            <TextBlock Text="Профиль пользователя"
               VerticalAlignment="Center"
               HorizontalAlignment="Center"
               Grid.Column="1" />

            <!-- Кнопка справа -->
            <Button Content="Добавить в группу"
            Click="AddToGroup_Click"
            Grid.Column="2" />
        </Grid>

        <!-- Основное содержимое -->
        <Grid Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <!-- Левая часть: данные профиля -->
            <StackPanel Grid.Column="0" Margin="0,0,10,0">
                <Border Style="{StaticResource BorderContainer}" Padding="10">
                    <StackPanel>
                        <!-- Аватар -->
                        <Image Width="120"
                               Height="120"
                               Margin="0,0,0,10"
                               Stretch="UniformToFill"
                               Source="{Binding Userprofile.AvatarUrl}"/>

                        <TextBlock Text="{Binding Name}"
                                   FontSize="16"                                   
                                   Margin="0,0,0,5"/>

                        <TextBlock Text="{Binding Login}"                                 
                                   Margin="0,0,0,10"/>

                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Email: " />
                            <TextBlock Text="{Binding Email}"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Телефон: " />
                            <TextBlock Text="{Binding Userprofile.Phone}"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Дата рождения: " />
                            <TextBlock Text="{Binding Userprofile.Birthday, StringFormat=d}"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Создан:"/>
                            <TextBlock Text="{Binding CreatedAt, StringFormat=g}"/>
                        </StackPanel>

                        <StackPanel Orientation="Horizontal">
                            <TextBlock Text="Роль: " />
                            <TextBlock Text="{Binding Role.Title}"/>
                        </StackPanel>

                        <TextBlock Text="О себе:" Margin="0,10,0,0"/>
                        <TextBox Text="{Binding Userprofile.Bio}"
                                 IsReadOnly="True"
                                 TextWrapping="Wrap"
                                 MinHeight="60"
                                 VerticalScrollBarVisibility="Auto"/>
                    </StackPanel>
                </Border>
            </StackPanel>

            <!-- Правая часть: группы интересов -->
            <StackPanel Grid.Column="1">
                <StackPanel Orientation="Horizontal" Margin="0,0,0,5">
                    <TextBlock Text="Группы интересов"
                               FontSize="14"
                               FontWeight="Bold"
                               VerticalAlignment="Center"/>

                </StackPanel>

                <StackPanel Orientation="Horizontal" Margin="0,5,0,3">
                    <TextBlock Text="Группа" Width="100"/>
                    <TextBlock Text="Дата вступления" Width="120" Margin="10,0,0,0"/>
                    <TextBlock Text="Модератор"  Margin="10,0,0,0"/>
                </StackPanel>

                <ListView ItemsSource="{Binding UserInterestGroups}">
                    <ListView.ItemTemplate>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Text="{Binding InterestGroup.Title}"
                           Width="100"/>

                                <TextBlock Text="{Binding JoinedAt, StringFormat=d}"
                           Margin="10,0,0,0"
                           Width="120"/>

                                <CheckBox IsChecked="{Binding IsModerator}"
                          IsEnabled="False"
                          Margin="10,0,0,0"
                          VerticalAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </ListView.ItemTemplate>
                </ListView>

            </StackPanel>
        </Grid>
    </Grid>
</Page>
